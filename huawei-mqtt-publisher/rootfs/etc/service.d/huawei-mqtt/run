#!/usr/bin/with-contenv bashio
# Cargar variables del addon
INVERTER_IP=$(bashio::config 'inverter_ip')
MODBUS_PORT=$(bashio::config 'modbus_port')
MODBUS_SLAVE_ID=$(bashio::config 'modbus_slave_id')
MQTT_HOST=$(bashio::config 'mqtt_host')
MQTT_PORT=$(bashio::config 'mqtt_port')
MQTT_USERNAME=$(bashio::config 'mqtt_username')
MQTT_PASSWORD=$(bashio::config 'mqtt_password')

bashio::log.info "Iniciando Huawei MQTT Publisher..."
bashio::log.info "Conectando al inversor en ${INVERTER_IP}:${MODBUS_PORT}"

# Ejecutar el script principal
exec python3 /huawei_mqtt.py