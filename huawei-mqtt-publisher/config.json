{
  "name": "Huawei Inverter MQTT Publisher (simple)",
  "version": "0.1.6",
  "slug": "huawei_mqtt_publisher_simple",
  "description": "Publica datos del inversor Huawei en MQTT vía Modbus TCP (implementación simple).",
  "url": "https://github.com/benjifc/hassio-addons",
  "arch": ["aarch64", "amd64"],
  "startup": "services",
  "boot": "auto",
  "init": false,
  "host_network": false,

  "options": {
    "inverter_ip": "192.168.1.102",
    "modbus_slave_id": 1,
    "modbus_port": 502,

    "mqtt_host": "core-mosquitto",
    "mqtt_port": 1883,
    "mqtt_username": "kmosquito",
    "mqtt_password": "",
    "mqtt_qos": 1,
    "mqtt_client_id": "huawei-mqtt-publisher-simple",
    "mqtt_protocol": "311",
    "mqtt_tls": false,
    "mqtt_keepalive": 60,

    "log_level": "INFO",

    "read_interval": 7.0,
    "per_read_delay": 0.4,

    "vars_immediate": [
      "INPUT_POWER", "ACTIVE_POWER", "GRID_VOLTAGE", "GRID_CURRENT", "GRID_FREQUENCY"
    ],
    "vars_periodic": [
      "DEVICE_STATUS", "FAULT_CODE", "INTERNAL_TEMPERATURE"
    ]
  },

  "schema": {
    "inverter_ip": "str",
    "modbus_slave_id": "int",
    "modbus_port": "int",

    "mqtt_host": "str",
    "mqtt_port": "int",
    "mqtt_username": "str?",
    "mqtt_password": "password?",
    "mqtt_qos": "int",
    "mqtt_client_id": "str",
    "mqtt_protocol": "list(311|5)?",
    "mqtt_tls": "bool?",
    "mqtt_keepalive": "int?",

    "log_level": "list(DEBUG|INFO|WARNING|ERROR|CRITICAL)?",

    "read_interval": "float?",
    "per_read_delay": "float?",

    "vars_immediate": ["str"],
    "vars_periodic": ["str"]
  },

  "map": ["ssl"]
}